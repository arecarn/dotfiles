# -                                                                        {{{
##############################################################################
# allow pasting in osx (this might have to stay on the top)
if-shell 'test "$(uname -s)" = Darwin' \
    'set-option -g default-command "exec reattach-to-user-namespace -l /usr/local/bin/zsh"'

###########################################################################}}}
# KEY MAPPINGS                                                             {{{
##############################################################################
# set prefix to CTRL-space
unbind C-b
set -g prefix C-Space

bind C-Space send-prefix
# vi mode
set-window-option -g mode-keys vi
# make pasting and entering copy mode more vim like
bind-key Escape copy-mode
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy V rectangle-toggle
bind-key -t vi-copy y copy-selection

bind-key p paste-buffer
bind-key [ previous-window
bind-key ] next-window

bind-key s source-file ~/.tmux.conf

bind-key n  command-prompt -I "\#W" "rename-window '%%'"
bind-key N command-prompt -I "\#S"  "rename-session '%%'"

bind-key x kill-pane
bind-key X kill-window
bind-key q confirm-before kill-session
bind-key Q confirm-before kill-server

# pane navigation kinda like vim window navigation
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r l select-pane -R

# expand a window in a certain direction
bind-key -r H select-pane -L \; resize-pane -Z
bind-key -r J select-pane -D \; resize-pane -Z
bind-key -r K select-pane -U \; resize-pane -Z
bind-key -r L select-pane -R \; resize-pane -Z

# use f-keys to resize sorta like hjkl
bind-key -r F9 resize-pane -L 2
bind-key -r F10 resize-pane -D 2
bind-key -r F11 resize-pane -U 2
bind-key -r F12 resize-pane -R 2

# easy way to swap windows
bind-key -r < swap-window -t -1
bind-key -r > swap-window -t +1

# Set the current working directory based on the current pane's current
# working directory (if set; if not, use the pane's starting directory) when
# creating new windows and splits.
bind-key - split-window -v -c '#{pane_current_path}'
bind-key \ split-window -h -c '#{pane_current_path}'
bind-key c new-window -c '#{pane_current_path}'
bind-key C command-prompt "new-session -A -c '#{pane_current_path}' -s '%%'"

bind-key ` choose-window "move-pane -t '%%'"
# list all sessions to pick
# move a window to a different session
bind-key @ choose-session "move-window -t '%%':"

# move a pane to a different window
bind-key '#' choose-tree -u

###########################################################################}}}
# GENERAL BEHAVIOR                                                         {{{
##############################################################################
# allow 256 colors
set -g default-terminal screen-256color

# don't rename windows automatically
set-option -g allow-rename off

# Automatically renumber windows as they are opened and closed
set-option -g renumber-windows on

# make scrollback bigger that default of 2000
set-option -g history-limit 50000

# enable mouse usage
set-option -g -q mouse on

# set window and pane index (0 by default)
set-option -g base-index 1
setw -g pane-base-index 1

set -sg escape-time 0
###########################################################################}}}
# PLUGINS                                                                  {{{
##############################################################################

# install tpm if it isn't there already
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm'"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-copycat'

# set -g @plugin 'tmux-plugins/tmux-sensible'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

###########################################################################}}}
# -                                                                        {{{
##############################################################################
# vim: textwidth=78
# vim: foldmethod=marker
###########################################################################}}}
